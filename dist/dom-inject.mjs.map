{"version":3,"file":"dom-inject.mjs","sources":["../src/index.js"],"sourcesContent":["/**\n * Written by Elliott Mangham at Code Resolution. Maintained by Code Resolution.\n * made@coderesolution.com\n */\nexport default class DomInject {\n\tconstructor(options = {}) {\n\t\tthis.options = {\n\t\t\tloadingClass: options.loadingClass || 'loading',\n\t\t\tloadedClass: options.loadedClass || 'loaded',\n\t\t\terrorClass: options.errorClass || 'error',\n\t\t\t...options,\n\t\t}\n\t}\n\n\tfetchContent(sourceUrl, sourceScope = null, includeParent = false) {\n\t\tconst url = sourceUrl || window.location.href\n\t\treturn fetch(url)\n\t\t\t.then((response) => {\n\t\t\t\tif (!response.ok) {\n\t\t\t\t\tthrow new Error('Network response was not ok.')\n\t\t\t\t}\n\t\t\t\treturn response.text()\n\t\t\t})\n\t\t\t.then((data) => {\n\t\t\t\tconst parser = new DOMParser()\n\t\t\t\tconst doc = parser.parseFromString(data, 'text/html')\n\t\t\t\tconst element = sourceScope ? doc.querySelector(sourceScope) : doc.body\n\t\t\t\tif (!element) {\n\t\t\t\t\tthrow new Error(`Element not found for selector: ${sourceScope}`)\n\t\t\t\t}\n\t\t\t\treturn includeParent && sourceScope ? element.outerHTML : element.innerHTML\n\t\t\t})\n\t}\n\n\tloadContent(\n\t\ttarget,\n\t\tsourceUrl = null,\n\t\tsourceScope = null,\n\t\t{ mode = 'replace', beforeFetch = null, afterFetch = null, includeParent = false } = {}\n\t) {\n\t\tconst targetElement = typeof target === 'string' ? document.querySelector(target) : target\n\t\tif (!targetElement) {\n\t\t\tconsole.error(`Target element not found.`)\n\t\t\treturn\n\t\t}\n\n\t\tthis._toggleLoadingState(targetElement, true)\n\n\t\tif (beforeFetch) {\n\t\t\tbeforeFetch(targetElement)\n\t\t}\n\n\t\tthis.fetchContent(sourceUrl, sourceScope, includeParent)\n\t\t\t.then((html) => {\n\t\t\t\tif (mode === 'prepend') {\n\t\t\t\t\ttargetElement.insertAdjacentHTML('afterbegin', html)\n\t\t\t\t} else if (mode === 'append') {\n\t\t\t\t\ttargetElement.insertAdjacentHTML('beforeend', html)\n\t\t\t\t} else {\n\t\t\t\t\t// default to 'replace'\n\t\t\t\t\ttargetElement.innerHTML = html\n\t\t\t\t}\n\n\t\t\t\tthis._toggleLoadingState(targetElement, false)\n\n\t\t\t\tif (afterFetch) {\n\t\t\t\t\tafterFetch(targetElement)\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch((error) => {\n\t\t\t\tconsole.error('Error fetching content:', error)\n\t\t\t\tthis._toggleLoadingState(targetElement, false, true)\n\t\t\t})\n\t}\n\n\t_toggleLoadingState(element, isLoading, isError = false) {\n\t\telement.classList.toggle(this.options.loadingClass, isLoading)\n\t\telement.classList.toggle(this.options.loadedClass, !isLoading && !isError)\n\t\telement.classList.toggle(this.options.errorClass, isError)\n\t}\n}\n"],"names":["DomInject","options","this","_extends","loadingClass","loadedClass","errorClass","_proto","prototype","fetchContent","sourceUrl","sourceScope","includeParent","url","window","location","href","fetch","then","response","ok","Error","text","data","doc","DOMParser","parseFromString","element","querySelector","body","outerHTML","innerHTML","loadContent","target","_temp","_this","_ref","_ref$mode","mode","_ref$beforeFetch","beforeFetch","_ref$afterFetch","afterFetch","_ref$includeParent","targetElement","document","_toggleLoadingState","html","insertAdjacentHTML","error","console","isLoading","isError","classList","toggle"],"mappings":"wNAIqB,IAAAA,eAAS,WAC7B,SAAAA,EAAYC,QAAAA,IAAAA,IAAAA,EAAU,CAAE,GACvBC,KAAKD,QAAOE,EAAA,CACXC,aAAcH,EAAQG,cAAgB,UACtCC,YAAaJ,EAAQI,aAAe,SACpCC,WAAYL,EAAQK,YAAc,SAC/BL,EAEL,CAAC,IAAAM,EAAAP,EAAAQ,UAmEAR,OAnEAO,EAEDE,aAAA,SAAaC,EAAWC,EAAoBC,QAApBD,IAAAA,IAAAA,EAAc,WAAMC,IAAAA,IAAAA,GAAgB,GAC3D,IAAMC,EAAMH,GAAaI,OAAOC,SAASC,KACzC,OAAOC,MAAMJ,GACXK,KAAK,SAACC,GACN,IAAKA,EAASC,GACb,MAAM,IAAIC,MAAM,gCAEjB,OAAOF,EAASG,MACjB,GACCJ,KAAK,SAACK,GACN,IACMC,GADS,IAAIC,WACAC,gBAAgBH,EAAM,aACnCI,EAAUhB,EAAca,EAAII,cAAcjB,GAAea,EAAIK,KACnE,IAAKF,EACJ,MAAU,IAAAN,MAAK,mCAAoCV,GAEpD,OAAOC,GAAiBD,EAAcgB,EAAQG,UAAYH,EAAQI,SACnE,EACF,EAACxB,EAEDyB,YAAA,SACCC,EACAvB,EACAC,EAAWuB,GAEV,IAAAC,EAAAjC,UAHQ,IAATQ,IAAAA,EAAY,WACZC,IAAAA,IAAAA,EAAc,MAAIyB,IAAAA,OACmE,IADnEF,EACmE,CAAE,EAAAA,EAAAG,EAAAD,EAArFE,KAAAA,OAAI,IAAAD,EAAG,UAASA,EAAAE,EAAAH,EAAEI,YAAAA,OAAc,IAAHD,EAAG,KAAIA,EAAAE,EAAAL,EAAEM,WAAAA,OAAa,IAAHD,EAAG,KAAIA,EAAAE,EAAAP,EAAExB,cAAAA,WAAa+B,GAAQA,EAE1EC,EAAkC,iBAAXX,EAAsBY,SAASjB,cAAcK,GAAUA,EAC/EW,GAKL1C,KAAK4C,oBAAoBF,GAAe,GAEpCJ,GACHA,EAAYI,GAGb1C,KAAKO,aAAaC,EAAWC,EAAaC,GACxCM,KAAK,SAAC6B,GACO,YAATT,EACHM,EAAcI,mBAAmB,aAAcD,GAC5B,WAATT,EACVM,EAAcI,mBAAmB,YAAaD,GAG9CH,EAAcb,UAAYgB,EAG3BZ,EAAKW,oBAAoBF,GAAe,GAEpCF,GACHA,EAAWE,EAEb,GAAE,MACK,SAACK,GACPC,QAAQD,MAAM,0BAA2BA,GACzCd,EAAKW,oBAAoBF,GAAe,GAAO,EAChD,IA9BAM,QAAQD,MAAK,4BA+Bf,EAAC1C,EAEDuC,oBAAA,SAAoBnB,EAASwB,EAAWC,QAAAA,IAAAA,IAAAA,GAAU,GACjDzB,EAAQ0B,UAAUC,OAAOpD,KAAKD,QAAQG,aAAc+C,GACpDxB,EAAQ0B,UAAUC,OAAOpD,KAAKD,QAAQI,aAAc8C,IAAcC,GAClEzB,EAAQ0B,UAAUC,OAAOpD,KAAKD,QAAQK,WAAY8C,EACnD,EAACpD,CAAA,CA3E4B"}